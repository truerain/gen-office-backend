# MIS > Admin > 공통코드 API (tb_cm_lkup_master / tb_cm_lkup_detail)

## 목적
- 관리자 화면에서 공통코드 그룹(`tb_cm_lkup_master`)과 상세코드(`tb_cm_lkup_detail`)를 등록/수정/삭제/조회한다.
- 공통코드 그룹-상세코드의 master-detail 관계를 관리한다.

## 범위
- 관리 대상:
  - 코드 그룹(마스터): `tb_cm_lkup_master`
  - 상세 코드(디테일): `tb_cm_lkup_detail`
- 키 구성:
  - 마스터 PK: `lkup_clss_cd`
  - 디테일 PK: `(lkup_clss_cd, lkup_cd)`
- 참조 규칙:
  - 디테일은 반드시 존재하는 `lkup_clss_cd`에만 생성 가능.
  - 물리 삭제는 지원하지 않으며 `use_yn`을 `N`으로 변경하여 비활성화한다.

## 데이터 모델
### tb_cm_lkup_master
- `lkup_clss_cd`: 코드 그룹 ID (PK)
- `lkup_clss_name`: 코드 그룹명
- `lkup_clss_desc`: 코드 그룹 설명
- `use_yn`: 사용 여부 (`Y`/`N`)
- `attribute1`~`attribute10`: 확장 필드
- `creation_date`, `created_by`, `last_updated_date`, `last_updated_by`

### tb_cm_lkup_detail
- `lkup_clss_cd`: 코드 그룹 ID (PK)
- `lkup_cd`: 상세 코드 (PK)
- `lkup_name`: 상세 코드명
- `lkup_name_eng`: 상세 코드 영문명
- `sort_order`: 정렬 순서
- `use_yn`: 사용 여부 (`Y`/`N`)
- `attribute1`~`attribute20`: 확장 필드
- `creation_date`, `created_by`, `last_updated_date`, `last_updated_by`

## Endpoints
### 1) 코드 그룹 목록 조회
- `GET /api/mis/admin/lookups/classes`
- Query params
  - `lkupClssCd` (optional, 부분검색)
  - `lkupClssName` (optional, 부분검색)
  - `useYn` (optional)
  - `q` (optional, name/desc 통합 검색)
  - `page` (optional, default 0)
  - `size` (optional, default 20)
  - `sort` (optional, default `lkup_clss_cd`)
    - 형식: `field [asc|desc]`를 콤마로 나열
    - 허용 필드: `lkup_clss_cd`, `lkup_clss_name`, `creation_date`, `last_updated_date`

Response
```json
{
  "items": [
    {
      "lkupClssCd": "USER_STATUS",
      "lkupClssName": "사용자 상태",
      "lkupClssDesc": "사용자 상태 코드",
      "useYn": "Y",
      "attribute1": null,
      "attribute2": null,
      "attribute3": null,
      "attribute4": null,
      "attribute5": null,
      "attribute6": null,
      "attribute7": null,
      "attribute8": null,
      "attribute9": null,
      "attribute10": null,
      "createdAt": "2026-02-24T10:00:00",
      "updatedAt": "2026-02-24T10:00:00"
    }
  ],
  "page": 0,
  "size": 20,
  "total": 1
}
```

### 2) 코드 그룹 단건 조회
- `GET /api/mis/admin/lookups/classes/{lkupClssCd}`

Response
```json
{
  "lkupClssCd": "USER_STATUS",
  "lkupClssName": "사용자 상태",
  "lkupClssDesc": "사용자 상태 코드",
  "useYn": "Y",
  "attribute1": null,
  "attribute2": null,
  "attribute3": null,
  "attribute4": null,
  "attribute5": null,
  "attribute6": null,
  "attribute7": null,
  "attribute8": null,
  "attribute9": null,
  "attribute10": null,
  "createdAt": "2026-02-24T10:00:00",
  "updatedAt": "2026-02-24T10:00:00"
}
```

### 3) 코드 그룹 생성
- `POST /api/mis/admin/lookups/classes`

Request
```json
{
  "lkupClssCd": "USER_STATUS",
  "lkupClssName": "사용자 상태",
  "lkupClssDesc": "사용자 상태 코드",
  "useYn": "Y",
  "attribute1": null,
  "attribute2": null,
  "attribute3": null,
  "attribute4": null,
  "attribute5": null,
  "attribute6": null,
  "attribute7": null,
  "attribute8": null,
  "attribute9": null,
  "attribute10": null
}
```

Response
```json
{
  "lkupClssCd": "USER_STATUS",
  "lkupClssName": "사용자 상태",
  "lkupClssDesc": "사용자 상태 코드",
  "useYn": "Y",
  "attribute1": null,
  "attribute2": null,
  "attribute3": null,
  "attribute4": null,
  "attribute5": null,
  "attribute6": null,
  "attribute7": null,
  "attribute8": null,
  "attribute9": null,
  "attribute10": null,
  "createdAt": "2026-02-24T10:00:00",
  "updatedAt": "2026-02-24T10:00:00"
}
```

### 4) 코드 그룹 수정
- `PUT /api/mis/admin/lookups/classes/{lkupClssCd}`

Request
```json
{
  "lkupClssName": "사용자 상태",
  "lkupClssDesc": "사용자 상태 코드",
  "useYn": "Y",
  "attribute1": null,
  "attribute2": null,
  "attribute3": null,
  "attribute4": null,
  "attribute5": null,
  "attribute6": null,
  "attribute7": null,
  "attribute8": null,
  "attribute9": null,
  "attribute10": null
}
```

Response
```json
{
  "lkupClssCd": "USER_STATUS",
  "lkupClssName": "사용자 상태",
  "lkupClssDesc": "사용자 상태 코드",
  "useYn": "Y",
  "attribute1": null,
  "attribute2": null,
  "attribute3": null,
  "attribute4": null,
  "attribute5": null,
  "attribute6": null,
  "attribute7": null,
  "attribute8": null,
  "attribute9": null,
  "attribute10": null,
  "createdAt": "2026-02-24T10:00:00",
  "updatedAt": "2026-02-24T10:05:00"
}
```

### 5) 코드 그룹 삭제
- 미지원(물리 삭제 없음). `useYn`을 `N`으로 변경하여 비활성화한다.

### 6) 상세 코드 목록 조회
- `GET /api/mis/admin/lookups/{lkupClssCd}/items`
- Query params
  - `lkupCd` (optional, 부분검색)
  - `lkupName` (optional, 부분검색)
  - `useYn` (optional)
  - `q` (optional, name/eng 통합 검색)
  - `page` (optional, default 0)
  - `size` (optional, default 50)
  - `sort` (optional, default `sort_order, lkup_cd`)
    - 형식: `field [asc|desc]`를 콤마로 나열
    - 허용 필드: `lkup_cd`, `lkup_name`, `lkup_name_eng`, `sort_order`, `creation_date`, `last_updated_date`

Response
```json
{
  "items": [
    {
      "lkupClssCd": "USER_STATUS",
      "lkupCd": "ACTIVE",
      "lkupName": "활성",
      "lkupNameEng": "Active",
      "sortOrder": 1,
      "useYn": "Y",
      "attribute1": null,
      "attribute2": null,
      "attribute3": null,
      "attribute4": null,
      "attribute5": null,
      "attribute6": null,
      "attribute7": null,
      "attribute8": null,
      "attribute9": null,
      "attribute10": null,
      "attribute11": null,
      "attribute12": null,
      "attribute13": null,
      "attribute14": null,
      "attribute15": null,
      "attribute16": null,
      "attribute17": null,
      "attribute18": null,
      "attribute19": null,
      "attribute20": null,
      "createdAt": "2026-02-24T10:00:00",
      "updatedAt": "2026-02-24T10:00:00"
    }
  ],
  "page": 0,
  "size": 50,
  "total": 1
}
```

### 7) 상세 코드 단건 조회
- `GET /api/mis/admin/lookups/{lkupClssCd}/items/{lkupCd}`

Response
```json
{
  "lkupClssCd": "USER_STATUS",
  "lkupCd": "ACTIVE",
  "lkupName": "활성",
  "lkupNameEng": "Active",
  "sortOrder": 1,
  "useYn": "Y",
  "attribute1": null,
  "attribute2": null,
  "attribute3": null,
  "attribute4": null,
  "attribute5": null,
  "attribute6": null,
  "attribute7": null,
  "attribute8": null,
  "attribute9": null,
  "attribute10": null,
  "attribute11": null,
  "attribute12": null,
  "attribute13": null,
  "attribute14": null,
  "attribute15": null,
  "attribute16": null,
  "attribute17": null,
  "attribute18": null,
  "attribute19": null,
  "attribute20": null,
  "createdAt": "2026-02-24T10:00:00",
  "updatedAt": "2026-02-24T10:00:00"
}
```

### 8) 상세 코드 생성
- `POST /api/mis/admin/lookups/{lkupClssCd}/items`

Request
```json
{
  "lkupCd": "ACTIVE",
  "lkupName": "활성",
  "lkupNameEng": "Active",
  "sortOrder": 1,
  "useYn": "Y",
  "attribute1": null,
  "attribute2": null,
  "attribute3": null,
  "attribute4": null,
  "attribute5": null,
  "attribute6": null,
  "attribute7": null,
  "attribute8": null,
  "attribute9": null,
  "attribute10": null,
  "attribute11": null,
  "attribute12": null,
  "attribute13": null,
  "attribute14": null,
  "attribute15": null,
  "attribute16": null,
  "attribute17": null,
  "attribute18": null,
  "attribute19": null,
  "attribute20": null
}
```

Response
```json
{
  "lkupClssCd": "USER_STATUS",
  "lkupCd": "ACTIVE",
  "lkupName": "활성",
  "lkupNameEng": "Active",
  "sortOrder": 1,
  "useYn": "Y",
  "attribute1": null,
  "attribute2": null,
  "attribute3": null,
  "attribute4": null,
  "attribute5": null,
  "attribute6": null,
  "attribute7": null,
  "attribute8": null,
  "attribute9": null,
  "attribute10": null,
  "attribute11": null,
  "attribute12": null,
  "attribute13": null,
  "attribute14": null,
  "attribute15": null,
  "attribute16": null,
  "attribute17": null,
  "attribute18": null,
  "attribute19": null,
  "attribute20": null,
  "createdAt": "2026-02-24T10:00:00",
  "updatedAt": "2026-02-24T10:00:00"
}
```

### 9) 상세 코드 수정
- `PUT /api/mis/admin/lookups/{lkupClssCd}/items/{lkupCd}`

Request
```json
{
  "lkupName": "활성",
  "lkupNameEng": "Active",
  "sortOrder": 1,
  "useYn": "Y",
  "attribute1": null,
  "attribute2": null,
  "attribute3": null,
  "attribute4": null,
  "attribute5": null,
  "attribute6": null,
  "attribute7": null,
  "attribute8": null,
  "attribute9": null,
  "attribute10": null,
  "attribute11": null,
  "attribute12": null,
  "attribute13": null,
  "attribute14": null,
  "attribute15": null,
  "attribute16": null,
  "attribute17": null,
  "attribute18": null,
  "attribute19": null,
  "attribute20": null
}
```

Response
```json
{
  "lkupClssCd": "USER_STATUS",
  "lkupCd": "ACTIVE",
  "lkupName": "활성",
  "lkupNameEng": "Active",
  "sortOrder": 1,
  "useYn": "Y",
  "attribute1": null,
  "attribute2": null,
  "attribute3": null,
  "attribute4": null,
  "attribute5": null,
  "attribute6": null,
  "attribute7": null,
  "attribute8": null,
  "attribute9": null,
  "attribute10": null,
  "attribute11": null,
  "attribute12": null,
  "attribute13": null,
  "attribute14": null,
  "attribute15": null,
  "attribute16": null,
  "attribute17": null,
  "attribute18": null,
  "attribute19": null,
  "attribute20": null,
  "createdAt": "2026-02-24T10:00:00",
  "updatedAt": "2026-02-24T10:05:00"
}
```

### 10) 상세 코드 삭제
- 미지원(물리 삭제 없음). `useYn`을 `N`으로 변경하여 비활성화한다.

## 검증 규칙
- `lkupClssCd`는 필수, 공백 금지.
- `lkupCd`는 필수, 공백 금지.
- `useYn`는 `Y` 또는 `N`.
- `sortOrder`는 0 이상의 정수 권장.
- 물리 삭제는 지원하지 않으며 비활성화는 `useYn`을 `N`으로 변경한다.
- 마스터 중복 키(`lkup_clss_cd`) 생성 시 `409 Conflict`.
- 디테일 중복 키(`lkup_clss_cd`, `lkup_cd`) 생성 시 `409 Conflict`.
- `size`는 최대 200.

## 에러 응답
- 표준 에러 포맷을 유지한다.
```json
{
  "code": "CONFLICT",
  "messageKey": "lookup.duplicate",
  "message": "이미 존재하는 공통코드입니다",
  "locale": "ko",
  "path": "/api/mis/admin/lookups",
  "timestamp": "2026-02-24T10:12:34+09:00",
  "traceId": null
}
```

## 보안
- 관리자 권한(예: `ROLE_ADMIN` 또는 운영 정책에 맞는 권한)만 접근 가능.
